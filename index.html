<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo de Detetive</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Cinzel:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

</head>
<style>
  /* Estilos Gerais */
/* Estilos Gerais */
*, *::before, *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Montserrat', sans-serif;
    background-color: #1a1a2e;
    background-image: url('wall.jpg');
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
}

/* Estilos de texto globais */
body {
    color: #ffffff !important; /* Branco puro */
    font-weight: 600 !important; /* Semi-negrito */
}

/* Texto dos botões */
.btn-primary, .btn-secondary, .btn-danger {
    font-weight: 700 !important; /* Negrito */
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* Texto das listas e instruções */
.players-list li, #game-instructions, #game-instructions li {
    color: #ffffff !important;
    font-weight: 500 !important;
}

/* Texto dos inputs */
input[type="text"] {
    color: #ffffff !important;
    font-weight: 500 !important;
}

/* Texto das labels */
label {
    color: #ffffff !important;
    font-weight: 600 !important;
}

/* Texto das descrições */
#role-description {
    color: #ffffff !important;
    font-weight: 500 !important;
}

.bg-blur {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    backdrop-filter: blur(4px);
    z-index: 0;
}

/* Adicione esta regra para os inputs */
input[type="text"] {
    position: relative;
    z-index: 2; /* Garante que fique acima dos efeitos do card */
}

.container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
    animation: fadeIn 0.8s ease-out;
}

.card {
    background: rgba(30, 30, 60, 0.85);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    padding: 30px;
    width: 100%;
    max-width: 500px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3), 
                0 0 15px rgba(108, 122, 137, 0.1) inset;
    border: 1px solid rgba(255, 255, 255, 0.05);
    position: relative;
    overflow: hidden;
}

.card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        45deg,
        transparent 0%,
        rgba(255, 255, 255, 0.03) 50%,
        transparent 100%
    );
    transform: rotate(45deg);
    animation: shine 8s infinite linear;
}

h1, h2, h3 {
    font-family: 'Cinzel', serif;
    color: #f8f8f8;
    text-align: center;
    margin-bottom: 20px;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

h1 {
    font-size: 2.2rem;
    margin-bottom: 30px;
    position: relative;
    display: inline-block;
    width: 100%;
}

h1 i {
    margin-right: 10px;
    color: #e94560;
    animation: pulse 2s infinite;
}

h2 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    color: #d1d1d1;
}

h3 {
    font-size: 1.2rem;
    margin: 15px 0;
    color: #e94560;
}

/* Formulários */
.form-group {
    margin-bottom: 20px;
}

label {
    display: block;
    margin-bottom: 8px;
    color: #a1a1a1;
    font-weight: 500;
    font-size: 0.9rem;
}

input[type="text"] {
    width: 100%;
    padding: 12px 15px;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(20, 20, 40, 0.7);
    color: #f8f8f8;
    font-size: 1rem;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) inset;
}

input[type="text"]:focus {
    outline: none;
    border-color: #e94560;
    box-shadow: 0 0 0 2px rgba(233, 69, 96, 0.3);
    background: rgba(30, 30, 60, 0.9);
}

/* Botões */
.btn-primary, .btn-secondary, .btn-danger {
    display: inline-block;
    padding: 12px 25px;
    border-radius: 8px;
    font-weight: 600;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
    margin-bottom: 10px;
    border: none;
    font-size: 1rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    position: relative;
    overflow: hidden;
}

.btn-primary {
    background: linear-gradient(135deg, #e94560, #c2334a);
    color: white;
}

.btn-secondary {
    background: linear-gradient(135deg, #4a5c6a, #3a4a56);
    color: white;
}

.btn-danger {
    background: linear-gradient(135deg, #ff4757, #cc3a47);
    color: white;
}

.btn-primary:hover, .btn-secondary:hover, .btn-danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

.btn-primary:active, .btn-secondary:active, .btn-danger:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.btn-primary::after, .btn-secondary::after, .btn-danger::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.2),
        transparent
    );
    transition: 0.5s;
}

.btn-primary:hover::after, .btn-secondary:hover::after, .btn-danger:hover::after {
    left: 100%;
}

/* Lista de Jogadores */
.players-list {
    margin: 25px 0;
    background: rgba(20, 20, 40, 0.5);
    padding: 15px;
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.players-list ul {
    list-style: none;
    max-height: 200px;
    overflow-y: auto;
    padding-right: 10px;
}

.players-list li {
    padding: 10px 15px;
    margin-bottom: 8px;
    background: rgba(40, 40, 70, 0.5);
    border-radius: 6px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
    border-left: 3px solid transparent;
}

.players-list li:hover {
    background: rgba(50, 50, 80, 0.7);
    border-left: 3px solid #e94560;
}

.you-badge {
    background: #e94560;
    color: white;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.7rem;
    font-weight: bold;
    margin-left: 8px;
}

.role-badge {
    background: #0f3460;
    color: white;
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: bold;
    margin-left: 8px;
    animation: bounce 1s infinite alternate;
}

/* Cartão de Papel no Jogo */
#role-card {
    position: relative;
    overflow: visible;
    padding-bottom: 100px;
}

#role-content {
    min-height: 200px;
    position: relative;
    z-index: 2;
}

#role-description {
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 20px;
    text-align: center;
}

#game-instructions {
    background: rgba(15, 52, 96, 0.3);
    padding: 15px;
    border-radius: 8px;
    border-left: 3px solid #e94560;
}

#game-instructions ul {
    list-style-position: inside;
    margin-top: 10px;
}

#game-instructions li {
    margin-bottom: 8px;
    line-height: 1.5;
}

/* Personagens */
.character {
    position: absolute;
    bottom: -50px;
    width: 150px;
    height: 200px;
    z-index: 1;
    transition: all 0.5s ease;
    filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    overflow: hidden;
    border-radius: 10px;
}

.character img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    object-position: center bottom;
}

.character.detective {
    left: 50%;
    transform: translateX(-50%);
    animation: float 3s ease-in-out infinite;
}

.character.victim {
    left: 20%;
    animation: float 3.5s ease-in-out infinite 0.5s;
}

.character.assassin {
    right: 20%;
    animation: float 4s ease-in-out infinite 0.7s;
}

/* Efeitos de Rolagem */
.scroll-effect {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.6s ease;
}

.scroll-effect.visible {
    opacity: 1;
    transform: translateY(0);
}

/* Animações */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

@keyframes shine {
    0% { transform: rotate(45deg) translate(-10%, -10%); }
    100% { transform: rotate(45deg) translate(10%, 10%); }
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
}

@keyframes bounce {
    from { transform: translateY(0); }
    to { transform: translateY(-5px); }
}

/* Responsividade */
@media (max-width: 768px) {
    .card {
        padding: 20px;
    }
    
    h1 {
        font-size: 1.8rem;
    }
    
    .character {
        width: 120px;
        height: 160px;
    }
}

@media (max-width: 480px) {
    .card {
        padding: 15px;
    }
    
    h1 {
        font-size: 1.5rem;
    }
    
    .character {
        width: 100px;
        height: 140px;
    }
}

/* Efeitos Especiais para Papéis */
#role-card[data-role="detective"] {
    border-top: 5px solid #0f3460;
}

#role-card[data-role="victim"] {
    border-top: 5px solid #e94560;
}

#role-card[data-role="assassin"] {
    border-top: 5px solid #333;
}

#role-card[data-role="detective"]::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 5px;
    background: linear-gradient(90deg, #0f3460, #4a5c6a, #0f3460);
    animation: progress 3s linear infinite;
}

#role-card[data-role="victim"]::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 5px;
    background: linear-gradient(90deg, #e94560, #ff6b81, #e94560);
    animation: progress 3s linear infinite;
}

#role-card[data-role="assassin"]::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 5px;
    background: linear-gradient(90deg, #333, #666, #333);
    animation: progress 3s linear infinite;
}

@keyframes progress {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
}

/* Efeito de Revelação */
.reveal-effect {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.5s ease;
}

.reveal-effect.active {
    opacity: 1;
    pointer-events: all;
}

.reveal-content {
    background: #1a1a2e;
    padding: 30px;
    border-radius: 15px;
    max-width: 80%;
    text-align: center;
    transform: scale(0.8);
    transition: transform 0.5s ease;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    border: 2px solid #e94560;
}

.reveal-effect.active .reveal-content {
    transform: scale(1);
}

/* Adicionando personagens dinamicamente */
#role-card[data-role="detective"] .character.detective,
#role-card[data-role="victim"] .character.victim,
#role-card[data-role="assassin"] .character.assassin {
    display: block;
}

/* Efeito de suspense */
.suspense {
    position: relative;
}

.suspense::before {
    content: '?';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 5rem;
    color: rgba(255, 255, 255, 0.1);
    z-index: 0;
}
</style>
<body>
  <div class="bg-blur"></div>
  <!-- Seu conteúdo principal aqui -->
    <div class="container" id="login-container">
        <div class="card">
            <h1><i class="fas fa-search"></i> Jogo de Detetive</h1>
            <div class="form-group">
                <label for="player-name">Seu Nome:</label>
                <input type="text" id="player-name" placeholder="Digite seu nome">
            </div>
            <div class="form-group">
                <label for="room-code">Código da Sala:</label>
                <input type="text" id="room-code" placeholder="Digite o código da sala">
            </div>
            <button id="join-room" class="btn-primary">Entrar na Sala</button>
            <button id="create-room" class="btn-secondary">Criar Nova Sala</button>
        </div>
    </div>

    <div class="container" id="lobby-container" style="display: none;">
        <div class="card">
            <h1><i class="fas fa-door-open"></i> Sala: <span id="display-room-code"></span></h1>
            <div class="players-list" id="players-list">
                <h2>Jogadores na Sala:</h2>
                <ul id="players-ul"></ul>
            </div>
            <div id="host-controls" style="display: none;">
                <button id="start-game" class="btn-primary">Iniciar Jogo</button>
                <button id="reset-game" class="btn-danger">Reiniciar Sala</button>
            </div>
            <button id="leave-room" class="btn-secondary">Sair da Sala</button>
        </div>
    </div>

    <div class="container" id="game-container" style="display: none;">
        <div class="card" id="role-card">
            <h1 id="role-title">Seu Papel</h1>
            <div id="role-content">
                <div id="role-description"></div>
                <div id="game-instructions"></div>
            </div>
            <div id="game-actions" style="display: none;">
                <button id="reveal-role" class="btn-primary">Revelar Meu Papel</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCwTNcpr_r75HH0igBtNyEbKvfuLkVFHiU",
            authDomain: "rifalidiane-fde3b.firebaseapp.com",
            databaseURL: "https://rifalidiane-fde3b-default-rtdb.firebaseio.com",
            projectId: "rifalidiane-fde3b",
            storageBucket: "rifalidiane-fde3b.appspot.com",
            messagingSenderId: "649359518677",
            appId: "1:649359518677:web:879b4ed9fa5150d24d2b5c"
        };

        // Inicializa o Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Variáveis globais
        let playerName = "";
        let roomCode = "";
        let playerId = "";
        let isHost = false;
        let playerRole = "";
        let gameStarted = false;

        // Elementos da DOM
        const loginContainer = document.getElementById('login-container');
        const lobbyContainer = document.getElementById('lobby-container');
        const gameContainer = document.getElementById('game-container');
        const playerNameInput = document.getElementById('player-name');
        const roomCodeInput = document.getElementById('room-code');
        const joinRoomBtn = document.getElementById('join-room');
        const createRoomBtn = document.getElementById('create-room');
        const displayRoomCode = document.getElementById('display-room-code');
        const playersList = document.getElementById('players-ul');
        const hostControls = document.getElementById('host-controls');
        const startGameBtn = document.getElementById('start-game');
        const resetGameBtn = document.getElementById('reset-game');
        const leaveRoomBtn = document.getElementById('leave-room');
        const roleTitle = document.getElementById('role-title');
        const roleDescription = document.getElementById('role-description');
        const gameInstructions = document.getElementById('game-instructions');
        const gameActions = document.getElementById('game-actions');
        const revealRoleBtn = document.getElementById('reveal-role');

        // Event Listeners
        joinRoomBtn.addEventListener('click', joinRoom);
        createRoomBtn.addEventListener('click', createRoom);
        startGameBtn.addEventListener('click', startGame);
        resetGameBtn.addEventListener('click', resetRoom);
        leaveRoomBtn.addEventListener('click', leaveRoom);
        revealRoleBtn.addEventListener('click', revealRole);

        // Função para gerar um ID aleatório
        function generateId() {
            return 'xxxx-xxxx-xxx-xxxx'.replace(/[x]/g, function() {
                return Math.floor(Math.random() * 16).toString(16);
            });
        }

        // Função para criar uma sala
        function createRoom() {
            playerName = playerNameInput.value.trim();
            if (!playerName) {
                alert("Por favor, digite seu nome");
                return;
            }
            
            roomCode = Math.floor(1000 + Math.random() * 9000).toString();
            playerId = generateId();
            isHost = true;
            
            const roomRef = database.ref(`rooms/${roomCode}`);
            
            roomRef.set({
                host: playerId,
                gameStarted: false,
                players: {
                    [playerId]: {
                        name: playerName,
                        role: "",
                        revealed: false
                    }
                }
            }).then(() => {
                showLobby();
                monitorRoom();
            }).catch(error => {
                console.error("Erro ao criar sala:", error);
                alert("Erro ao criar sala. Verifique o console para mais detalhes.");
            });
        }

        // Função para entrar em uma sala existente
        function joinRoom() {
            playerName = playerNameInput.value.trim();
            roomCode = roomCodeInput.value.trim();
            
            if (!playerName || !roomCode) {
                alert("Por favor, preencha todos os campos");
                return;
            }
            
            playerId = generateId();
            
            const roomRef = database.ref(`rooms/${roomCode}`);
            
            roomRef.once('value').then(snapshot => {
                if (!snapshot.exists()) {
                    alert("Sala não encontrada. Verifique o código.");
                    return;
                }
                
                const roomData = snapshot.val();
                
                if (roomData.gameStarted) {
                    alert("O jogo já começou nesta sala. Você não pode entrar agora.");
                    return;
                }
                
                roomRef.child(`players/${playerId}`).set({
                    name: playerName,
                    role: "",
                    revealed: false
                }).then(() => {
                    showLobby();
                    monitorRoom();
                }).catch(error => {
                    console.error("Erro ao entrar na sala:", error);
                    alert("Erro ao entrar na sala. Verifique o console para mais detalhes.");
                });
            }).catch(error => {
                console.error("Erro ao verificar sala:", error);
                alert("Erro ao verificar sala. Verifique o console para mais detalhes.");
            });
        }

        // Função para mostrar o lobby
        function showLobby() {
            loginContainer.style.display = 'none';
            lobbyContainer.style.display = 'flex';
            gameContainer.style.display = 'none';
            
            displayRoomCode.textContent = roomCode;
            
            if (isHost) {
                hostControls.style.display = 'block';
            } else {
                hostControls.style.display = 'none';
            }
        }

        // Função para monitorar mudanças na sala
        function monitorRoom() {
            const roomRef = database.ref(`rooms/${roomCode}`);
            
            roomRef.on('value', snapshot => {
                const roomData = snapshot.val();
                
                if (!roomData) {
                    alert("A sala foi encerrada pelo host.");
                    window.location.reload();
                    return;
                }
                
                updatePlayersList(roomData.players);
                
                if (roomData.gameStarted && !gameStarted) {
                    gameStarted = true;
                    startPlayerGame(roomData.players[playerId].role);
                }
                
                if (!roomData.gameStarted && gameStarted) {
                    gameStarted = false;
                    showLobby();
                }
            }, error => {
                console.error("Erro ao monitorar sala:", error);
            });
        }

        // Atualiza a lista de jogadores
        function updatePlayersList(players) {
            playersList.innerHTML = '';
            
            for (const [id, player] of Object.entries(players || {})) {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span>${player.name}</span>
                    ${id === playerId ? '<span class="you-badge">(Você)</span>' : ''}
                    ${player.role && player.revealed ? `<span class="role-badge">${getRoleName(player.role)}</span>` : ''}
                `;
                playersList.appendChild(li);
            }
        }

        // Inicia o jogo (apenas host)
        function startGame() {
            const roomRef = database.ref(`rooms/${roomCode}`);
            
            roomRef.once('value').then(snapshot => {
                const roomData = snapshot.val();
                const players = roomData.players;
                const playerIds = Object.keys(players);
                const playerCount = playerIds.length;
                
                if (playerCount < 3) {
                    alert("São necessários pelo menos 3 jogadores para começar o jogo.");
                    return;
                }
                
                const roles = assignRoles(playerCount);
                
                const updates = {};
                playerIds.forEach((id, index) => {
                    updates[`players/${id}/role`] = roles[index];
                    updates[`players/${id}/revealed`] = false;
                });
                
                updates['gameStarted'] = true;
                
                roomRef.update(updates).catch(error => {
                    console.error("Erro ao iniciar jogo:", error);
                    alert("Erro ao iniciar jogo. Verifique o console para mais detalhes.");
                });
            }).catch(error => {
                console.error("Erro ao obter dados da sala:", error);
                alert("Erro ao obter dados da sala. Verifique o console para mais detalhes.");
            });
        }

        // Atribui os papéis (1 assassino, 1 detetive, o resto vítimas)
        function assignRoles(playerCount) {
            const roles = [];
            
            // Garantir papéis únicos obrigatórios
            roles.push('assassin');  // 1 assassino
            roles.push('detective'); // 1 detetive
            
            // Todos os demais são vítimas
            for (let i = 0; i < playerCount - 2; i++) {
                roles.push('victim');
            }
            
            // Embaralha para evitar previsibilidade
            return shuffleArray(roles);
        }

        // Embaralha um array
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Inicia o jogo para um jogador
        function startPlayerGame(role) {
            playerRole = role;
            loginContainer.style.display = 'none';
            lobbyContainer.style.display = 'none';
            gameContainer.style.display = 'flex';
            
            gameActions.style.display = 'block';
            roleTitle.textContent = "Bem-vindo ao Jogo";
            roleDescription.textContent = "Clique no botão abaixo para revelar seu papel no jogo.";
            gameInstructions.textContent = "Não compartilhe seu papel com outros jogadores até o momento apropriado!";
        }

        // Revela o papel do jogador
function revealRole() {
    const roomRef = database.ref(`rooms/${roomCode}/players/${playerId}`);
    roomRef.update({ revealed: true }).then(() => {
        gameActions.style.display = 'none';
        
        // Configurações específicas para cada papel
        const roleConfig = {
            'assassin': {
                title: '<i class="fas fa-skull"></i> Assassino',
                description: "Você é o assassino! Seu objetivo é eliminar uma das vítimas sem ser descoberto pelo detetive.",
                instructions: `
                    <h3>Instruções:</h3>
                    <ul>
                        <li>Você deve eliminar uma vítima sem ser pego pelo detetive.</li>
                        <li>Tente se misturar com as vítimas e não chamar atenção.</li>
                        <li>Se você for descoberto pelo detetive, você perde.</li>
                    </ul>
                `,
                gif: 'https://i.gifer.com/PrjO.gif' // GIF de assassino
            },
            'victim': {
                title: '<i class="fas fa-user-injured"></i> Vítima',
                description: "Você é uma vítima! O assassino está tentando te eliminar. Tente sobreviver e ajudar o detetive.",
                instructions: `
                    <h3>Instruções:</h3>
                    <ul>
                        <li>Você não sabe quem é o assassino.</li>
                        <li>Tente descobrir quem é o assassino junto com o detetive.</li>
                        <li>Se o assassino for descoberto, você vence.</li>
                    </ul>
                `,
                gif: 'https://i.gifer.com/9wmP.gif' // GIF de vítima assustada
            },
            'detective': {
                title: '<i class="fas fa-search"></i> Detetive',
                description: "Você é o detetive! Seu objetivo é descobrir quem é o assassino antes que ele elimine uma vítima.",
                instructions: `
                    <h3>Instruções:</h3>
                    <ul>
                        <li>Investigue os outros jogadores e colete pistas.</li>
                        <li>Proteja as vítimas e descubra o assassino.</li>
                        <li>Se você descobrir o assassino, você e as vítimas vencem.</li>
                    </ul>
                `,
                gif: 'https://i.pinimg.com/originals/7a/62/3f/7a623ff296a6b44cf0183c72c4003457.gif' // GIF de detetive
            }
        };

        // Aplica as configurações baseadas no papel
        const config = roleConfig[playerRole];
        roleTitle.innerHTML = config.title;
        roleDescription.textContent = config.description;
        gameInstructions.innerHTML = config.instructions;

        // Configura o personagem GIF
        const roleCard = document.getElementById('role-card');
        roleCard.setAttribute('data-role', playerRole);

        // Remove qualquer personagem existente
        const existingCharacter = roleCard.querySelector('.character');
        if (existingCharacter) {
            roleCard.removeChild(existingCharacter);
        }

        // Cria o container do GIF
        const characterContainer = document.createElement('div');
        characterContainer.className = `character ${playerRole}`;
        
        // Para melhor controle, podemos usar tag img em vez de background-image
        characterContainer.innerHTML = `
            <img src="${config.gif}" alt="${playerRole}" 
                 style="width: 100%; height: 100%; object-fit: contain;">
        `;
        
        roleCard.appendChild(characterContainer);

    }).catch(error => {
        console.error("Erro ao revelar papel:", error);
        alert("Erro ao revelar papel. Verifique o console para mais detalhes.");
    });
}

        // Reinicia a sala (apenas host)
        function resetRoom() {
            const roomRef = database.ref(`rooms/${roomCode}`);
            
            roomRef.once('value').then(snapshot => {
                const players = snapshot.val().players;
                const updates = {};
                
                for (const id in players) {
                    updates[`players/${id}/role`] = "";
                    updates[`players/${id}/revealed`] = false;
                }
                
                updates['gameStarted'] = false;
                roomRef.update(updates).catch(error => {
                    console.error("Erro ao reiniciar sala:", error);
                    alert("Erro ao reiniciar sala. Verifique o console para mais detalhes.");
                });
            }).catch(error => {
                console.error("Erro ao obter dados da sala:", error);
                alert("Erro ao obter dados da sala. Verifique o console para mais detalhes.");
            });
        }

        // Sai da sala
        function leaveRoom() {
            const roomRef = database.ref(`rooms/${roomCode}/players/${playerId}`);
            
            roomRef.remove().then(() => {
                window.location.reload();
            }).catch(error => {
                console.error("Erro ao sair da sala:", error);
                alert("Erro ao sair da sala. Verifique o console para mais detalhes.");
            });

            // Lógica adicional se o host sair (opcional, pode deletar a sala)
        }

        // Retorna o nome do papel para exibição
        function getRoleName(role) {
            switch (role) {
                case 'assassin': return 'Assassino';
                case 'victim': return 'Vítima';
                case 'detective': return 'Detetive';
                default: return 'Vítima';
            }
        }
    </script>
</body>
</html>
